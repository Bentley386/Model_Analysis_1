Finding the optimal accelerating/braking sequence with calculus of variations.